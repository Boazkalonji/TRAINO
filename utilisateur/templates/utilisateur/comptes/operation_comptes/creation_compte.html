{% extends '../head.html' %}
{% load static %}

<link rel="stylesheet" href="{% static 'css_compte/creation_compte.css' %}">

{% block containter %}

<div class="">
    <div class="container card p-4 custom-stepper-form custom-centered-form" style="margin-top: 80px;">

        <h3>CREATION COMPTE</h3>
        
        <div class="progress mb-4">
            <div class="progress-bar" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" id="progressIndicator"></div>
        </div>

        <form novalidate id="multiStepForm" action="{% url 'utilisateur:creation_comptes' %}" method="post">
            {% csrf_token %}

            <div class="form-step active" data-step="1">
                <h4 class="mb-4">1. Vos informations personnelles</h4>

                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="bi bi-person"></i></span>
                    <input type="text" 
                            name="nom" 
                            class="form-control" 
                            placeholder="Entrez votre Nom" 
                            required 
                            id="nom">
                    {% if erreur.nom %}
                        <div class="invalid-feedback d-block">{{ erreur.nom }}</div> 
                    {% endif %}
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
                    <input type="text" 
                            name="postnom" 
                            class="form-control" 
                            placeholder="Entrez votre Postnom" 
                            required 
                            id="postnom">
                    {% if erreur.postnom %}
                        <div class="invalid-feedback d-block">{{ erreur.postnom }}</div>
                    {% endif %}
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="bi bi-person-badge"></i></span>
                    <input type="text" 
                            name="prenom" 
                            class="form-control" 
                            placeholder="Entrez votre Prénom" 
                            required 
                            id="prenom">
                    {% if erreur.prenom %}
                        <div class="invalid-feedback d-block">{{ erreur.prenom }}</div>
                    {% endif %}
                </div>
                
                <button type="button" class="btn next-step text-white" style="background-color: #f74545; border-color: #f74545;" data-target-step="2">
                    Continuer <i class="bi bi-arrow-right"></i>
                </button>
            </div>


            <div class="form-step" data-step="2" style="display: none;">
                <h4 class="mb-4">2. Vos identifiants unique</h4>

                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                    <input type="email" 
                            name="email" 
                            class="form-control" 
                            placeholder="Entrez votre email" 
                            required 
                            id="email">
                    {% if erreur.email or erreur.email_non_valide %}
                        <div class="invalid-feedback d-block">{{ erreur.email|default:erreur.email_non_valide }}</div>
                    {% endif %}
                </div>
                
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="bi bi-lock"></i></span>
                    <input type="password" 
                            name="password" 
                            class="form-control" 
                            placeholder="Mot de passe (8 caractères min.)" 
                            required 
                            id="password" 
                            maxlength="20">
                    {% if erreur.password %}
                        <div class="invalid-feedback d-block">{{ erreur.password }}</div>
                    {% endif %}
                </div>

                <button type="button" class="btn btn_custum_one prev-step me-2 text-white" style="background-color: #080160; border-color: #080160;" data-target-step="1">
                    <i class="bi bi-arrow-left"></i> Retour
                </button>
                <input type="submit" value="Valider" class="btn text-white" style="background-color: #f74545; border-color: #f74545;">
            </div>
            
            {% if erreur %}
                <div class="alert alert-danger mt-3" role="alert">
                    <h4 class="alert-heading">Erreur(s) détectée(s) :</h4>
                    {% for cle, message in erreur.items %}
                        {% if cle == 'email' or cle == 'general' or cle == 'email_non_valide' %}
                            <p class="mb-0"><strong>{{ message }} </strong></p>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}

        </form>
    </div>
</div>

<script src="{% static 'js_compte/creation_compte.js' %}"></script>

{% endblock %}